<!doctype html>
<html>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <body>
        <h1>Project Voyager Web Flasher</h1>
        <hr>
        Hardware Version
        <select onchange="select_version(this.value)">
            <option value="1" selected>Version 1</option>
            <option value="2">Version 2</option>
        </select>
        <div id="main" style="display: none">
            <br>
            <script type="module" src="https://unpkg.com/esp-web-tools@7.3.1/dist/web/install-button.js?module"></script>
            <esp-web-install-button id="installButton" manifest="webflash/manifest-1.json"></esp-web-install-button>
            <br>
            <br>
            <span>
                NOTE: Make sure to close anything using your devices com port (e.g.
        Serial monitor)
            </span
      >
        </div>
        <div id="notSupported" style="display: none">
            Your browser does not support the Web Serial API. Try Chrome
        </div>
        <script>
      function select_version(val)
      {
        if(val == "1")
        {
          $("#installButton").attr("manifest",
            "webflash/manifest-1.json"
          )
        }
        if(val == "2")
        {
          $("#installButton").attr("manifest",
            "webflash/manifest-2.json"
          )
        }
      }
      if (navigator.serial) {
        document.getElementById("notSupported").style.display = "none";
        document.getElementById("main").style.display = "block";
      } else {
        document.getElementById("notSupported").style.display = "block";
        document.getElementById("main").style.display = "none";
      }
        </script>
    </body>
</html>
